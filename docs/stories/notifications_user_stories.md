# 通知系统 (Notifications) - 用户故事

## 1. 站内通知

### 故事 1.1：接收关键操作的实时通知

**作为** 一名用户，
**我想要** 在系统内的一个显眼位置（如导航栏的铃铛图标）接收到与我相关的实时通知，
**以便** 我能及时了解重要的更新，而不会错过关键信息。

**验收标准：**
- 当以下事件发生时，我会收到一条站内通知：
  - 有人将一个任务分配给我。
  - 我负责的任务状态发生了变化。
  - 我负责的任务即将到期（例如，24小时内）。
  - 有人在我参与的任务或评论中 @提及 我。
  - 有人邀请我加入一个新的团队或看板。
- 导航栏的通知图标会显示未读通知的数量。
- 点击通知图标会弹出一个列表，展示最近的通知。

### 故事 1.2：管理通知

**作为** 一名用户，
**我想要** 在通知列表中将通知标记为已读，或者清除所有通知，
**以便** 我可以管理我的通知收件箱，保持其整洁。

**验收标准：**
- 在通知下拉列表中，点击单条通知会将其标记为已读，并可能直接跳转到相关页面（如任务详情页）。
- 未读通知有明显的视觉区别（例如，背景色或小蓝点）。
- 提供“全部标记为已读”的选项。
- （可选）提供一个专门的通知中心页面，可以查看所有的历史通知。

## 2. 邮件通知

### 故事 2.1：通过邮件接收重要通知

**作为** 一名用户，
**我想要** 通过我的注册邮箱接收重要的系统通知，
**以便** 即使我没有登录系统，也能了解到关键的更新。

**验收标准：**
- 与站内通知类似的关键事件（任务分配、@提及、团队邀请等）也会触发邮件通知。
- 邮件内容清晰明了，包含事件的摘要和指向相关页面的链接。
- 邮件有专业的格式和布局。

### 故事 2.2：接收摘要邮件

**作为** 一名繁忙的经理或团队成员，
**我想要** 选择接收每日或每周的工作摘要邮件，
**以便** 我可以用一种集中的方式回顾近期分配给我的任务、即将到期的任务以及团队的整体进展。

**验收标准：**
- **每日摘要**：每天早上发送，总结过去24小时内与我相关的活动和未来24小时内即将到期的任务。
- **每周摘要**：每周一早上发送，总结过去一周的团队活动、个人任务完成情况和本周的计划。
- 用户可以在偏好设置中选择订阅或退订这些摘要邮件。

## 3. 通知偏好设置

### 故事 3.1：自定义通知接收方式

**作为** 一名用户，
**我想要** 在我的个人设置中详细配置我希望接收哪些类型的通知，以及通过哪种渠道（站内、邮件）接收，
**以便** 避免信息过载，只关注我最关心的内容。

**验收标准：**
- 在用户设置页面，有一个“通知”标签页。
- 用户可以对每一种通知类型（如“任务分配”、“@提及”、“每日摘要”等）进行独立的设置。
- 对于每种类型，用户可以选择“立即通知”、“每日摘要”、“每周摘要”或“从不通知”。
- 用户可以全局开启或关闭邮件通知。
- 用户的设置会立即生效。

## 4. 管理员功能

### 故事 4.1：管理邮件模板

**作为** 一名系统管理员，
**我想要** 在后台编辑系统发送的各种通知邮件的模板，
**以便** 我可以自定义邮件的品牌、措辞和内容，以符合我们企业的形象。

**验收标准：**
- 在管理后台，有一个“邮件模板管理”区域。
- 列表展示所有类型的通知邮件（如任务分配、团队邀请等）。
- 管理员可以编辑每种邮件模板的主题和正文内容。
- 模板支持使用变量（如 `{{ user.name }}`、`{{ task.title }}`）来动态插入信息。
- 可以选择发送HTML格式或纯文本格式的邮件。
